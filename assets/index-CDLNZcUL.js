import{g as u,t as $,i as l,b as d,c as a,S as me,C as ve,P as _e,d as P,o as Z,e as f,a as E,f as ee,j as fe,m as j,s as W,L as te,F as Se,k as we,R as K,u as ye,l as Ce,n as pe,V as Pe,p as ke}from"./main-BzxyhOKS.js";import{l as Ve,i as Me,a as Ie}from"./studyStore-jEHgk9xh.js";var Fe=$('<div class="grid grid-cols-3 gap-4 max-w-lg mx-auto mb-8"><div class="bg-emerald-800/50 rounded-xl p-4 text-center backdrop-blur-sm border border-emerald-700/50"><div class="text-2xl font-bold text-amber-400"></div><div class="text-sm text-emerald-300">ÙÙŠØ¯ÙŠÙˆ</div></div><div class="bg-emerald-800/50 rounded-xl p-4 text-center backdrop-blur-sm border border-emerald-700/50"><div class="text-2xl font-bold text-amber-400"></div><div class="text-sm text-emerald-300">Ù‚Ø§Ø¦Ù…Ø© ØªØ´ØºÙŠÙ„</div></div><div class="bg-emerald-800/50 rounded-xl p-4 text-center backdrop-blur-sm border border-emerald-700/50"><div class="text-2xl font-bold text-amber-400"></div><div class="text-sm text-emerald-300">ØªØµÙ†ÙŠÙ');function Le(e){return(()=>{var t=u(Fe),r=t.firstChild,n=r.firstChild,s=r.nextSibling,h=s.firstChild,b=s.nextSibling,c=b.firstChild;return l(n,()=>e.totalVideos),l(h,()=>e.totalPlaylists),l(c,()=>e.categoriesCount),t})()}var Ne=$('<header class="bg-gradient-to-b from-emerald-900 to-emerald-950 pt-24 pb-8"><div class="container mx-auto px-4"><div class="text-center mb-8"><h1 class="text-4xl md:text-5xl font-bold text-amber-400 mb-4 font-cairo">ğŸ“š <!$><!/></h1><p class="text-emerald-200 text-lg max-w-2xl mx-auto"></p></div><!$><!/><!$><!/>');function Be(e){return(()=>{var t=u(Ne),r=t.firstChild,n=r.firstChild,s=n.firstChild,h=s.firstChild,b=h.nextSibling,[c,o]=d(b.nextSibling),m=s.nextSibling,_=n.nextSibling,[v,S]=d(_.nextSibling),p=v.nextSibling,[g,w]=d(p.nextSibling);return l(s,()=>e.title,c,o),l(m,()=>e.description),l(r,a(Le,{get totalVideos(){return e.stats.totalVideos},get totalPlaylists(){return e.stats.totalPlaylists},get categoriesCount(){return e.stats.categoriesCount}}),v,S),l(r,a(me,{get value(){return e.searchQuery},get onInput(){return e.onSearchChange}}),g,w),t})()}var Ae=$('<aside class="lg:w-80 order-2 lg:order-1"><div class="bg-emerald-900/30 rounded-xl p-4 border border-emerald-700/30 sticky top-24"><div class=mb-6><h3 class="text-lg font-bold text-amber-400 mb-4">Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</h3><!$><!/></div><div><h3 class="text-lg font-bold text-amber-400 mb-4">Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„ØªØ´ØºÙŠÙ„</h3><!$><!/>');function De(e){return(()=>{var t=u(Ae),r=t.firstChild,n=r.firstChild,s=n.firstChild,h=s.nextSibling,[b,c]=d(h.nextSibling),o=n.nextSibling,m=o.firstChild,_=m.nextSibling,[v,S]=d(_.nextSibling);return l(n,a(ve,{get categories(){return e.categories},get playlists(){return e.playlists},get selectedCategory(){return e.selectedCategory},get onCategoryClick(){return e.onCategoryClick}}),b,c),l(o,a(_e,{get playlists(){return e.playlists},get selectedPlaylist(){return e.selectedPlaylist},get selectedCategory(){return e.selectedCategory},get onPlaylistClick(){return e.onPlaylistClick},get onClearSelection(){return e.onClearPlaylistSelection}}),v,S),t})()}var Qe=$('<div class="mt-2 h-1.5 bg-emerald-800 rounded-full overflow-hidden"><div>'),je=$('<span class="bg-green-500/20 text-green-400 text-xs px-2 py-0.5 rounded-full flex items-center gap-1"><svg class="w-3 h-3"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd></path></svg>Ù…ÙƒØªÙ…Ù„'),Re=$('<span class="bg-amber-500/20 text-amber-400 text-xs px-2 py-0.5 rounded-full">â­ Ù…ÙØ¶Ù„'),Te=$('<span class="bg-purple-500/20 text-purple-400 text-xs px-2 py-0.5 rounded-full">ğŸ“‹ Ù„Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©'),We=$('<span class="bg-blue-500/20 text-blue-400 text-xs px-2 py-0.5 rounded-full">ğŸ“ <!$><!/>'),Ee=$('<span class="text-emerald-400 text-xs mr-auto"><!$><!/>%'),ze=$('<div class="flex items-center gap-2 mt-2 flex-wrap"><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/>');const Ge=typeof window<"u";function re(e){const t=()=>e.showProgress!==!1,r=()=>e.showFavorite!==!1,n=()=>e.showWatchLater!==!1,[s,h]=P(0),[b,c]=P(!1),[o,m]=P(!1),[_,v]=P(!1),[S,p]=P(!1);return Z(async()=>{if(Ge){const g=await Ve(e.videoId);h(g.progress.watchedPercentage),c(g.progress.completed),m(g.notes.length>0),v(await Me(e.videoId)),p(await Ie(e.videoId))}}),[a(f,{get when(){return j(()=>!!t())()&&s()>0},get children(){var g=u(Qe),w=g.firstChild;return E(C=>{var V=`h-full transition-all rounded-full ${b()?"bg-green-500":"bg-amber-500"}`,M=`${s()}%`;return V!==C.e&&ee(w,C.e=V),M!==C.t&&fe(w,"width",C.t=M),C},{e:void 0,t:void 0}),g}}),(()=>{var g=u(ze),w=g.firstChild,[C,V]=d(w.nextSibling),M=C.nextSibling,[y,B]=d(M.nextSibling),A=y.nextSibling,[N,D]=d(A.nextSibling),z=N.nextSibling,[I,G]=d(z.nextSibling),Q=I.nextSibling,[L,R]=d(Q.nextSibling);return l(g,a(f,{get when(){return j(()=>!!t())()&&b()},get children(){return u(je)}}),C,V),l(g,a(f,{get when(){return j(()=>!!r())()&&_()},get children(){return u(Re)}}),y,B),l(g,a(f,{get when(){return j(()=>!!n())()&&S()},get children(){return u(Te)}}),N,D),l(g,a(f,{get when(){return o()},get children(){var k=u(We),i=k.firstChild,x=i.nextSibling,[F,H]=d(x.nextSibling);return l(k,()=>s()>0?"":"Ù…Ù„Ø§Ø­Ø¸Ø§Øª",F,H),k}}),I,G),l(g,a(f,{get when(){return j(()=>!!(t()&&s()>0))()&&!b()},get children(){var k=u(Ee),i=k.firstChild,[x,F]=d(i.nextSibling);return x.nextSibling,l(k,()=>Math.round(s()),x,F),k}}),L,R),g})()]}function le(e){if(!e)return"";const t=e.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/);if(!t)return e;const r=t[1]?parseInt(t[1]):0,n=t[2]?parseInt(t[2]):0,s=t[3]?parseInt(t[3]):0;return r>0?`${r}:${n.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`:`${n}:${s.toString().padStart(2,"0")}`}function ne(e){if(!e)return"";const t=parseInt(e);return t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}K`:e}function ae(e){return new Date(e).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"})}var ie=$('<span class="absolute bottom-2 left-2 bg-black/80 text-white text-xs px-2 py-1 rounded">'),He=$('<div class=relative><img class="w-full aspect-video object-cover"><div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center"><div class="bg-amber-500 rounded-full p-4"><svg class="w-8 h-8 text-emerald-950"fill=currentColor viewBox="0 0 24 24"><path d="M8 5v14l11-7z"></path></svg></div></div><!$><!/>'),qe=$("<span><!$><!/> Ù…Ø´Ø§Ù‡Ø¯Ø©"),Ke=$('<div class=p-4><h3 class="font-bold text-emerald-50 line-clamp-2 mb-2 group-hover:text-amber-400 transition-colors"></h3><div class="flex justify-between items-center text-sm text-emerald-400"><span></span><!$><!/></div><!$><!/>'),Je=$('<div class="relative shrink-0"><img class="w-48 h-28 object-cover rounded-lg"><!$><!/>'),Oe=$('<p class="text-emerald-400 text-sm mb-2">'),Ue=$("<span>ğŸ‘ï¸ <!$><!/>"),Xe=$('<div class="flex-1 min-w-0"><h3 class="font-bold text-emerald-50 line-clamp-2 mb-2 hover:text-amber-400 transition-colors"></h3><!$><!/><div class="flex flex-wrap gap-3 text-sm text-emerald-300"><span>ğŸ“… <!$><!/></span><!$><!/></div><!$><!/>');function Ye(e){return e.viewMode==="list"?a(et,{get video(){return e.video},get showProgress(){return e.showProgress}}):a(Ze,{get video(){return e.video},get showProgress(){return e.showProgress}})}function Ze(e){const t=()=>e.video;return a(te,{to:"/study/$id",get params(){return{id:t().id}},class:"group bg-emerald-900/50 rounded-xl overflow-hidden border border-emerald-700/50 hover:border-amber-500/50 cursor-pointer transition-all duration-300 hover:transform hover:scale-[1.02] hover:shadow-xl hover:shadow-amber-500/10",get children(){return[(()=>{var r=u(He),n=r.firstChild,s=n.nextSibling,h=s.nextSibling,[b,c]=d(h.nextSibling);return l(r,a(f,{get when(){return t().duration},get children(){var o=u(ie);return l(o,()=>le(t().duration)),o}}),b,c),E(o=>{var m=t().thumbnail,_=t().title;return m!==o.e&&W(n,"src",o.e=m),_!==o.t&&W(n,"alt",o.t=_),o},{e:void 0,t:void 0}),r})(),(()=>{var r=u(Ke),n=r.firstChild,s=n.nextSibling,h=s.firstChild,b=h.nextSibling,[c,o]=d(b.nextSibling),m=s.nextSibling,[_,v]=d(m.nextSibling);return l(n,()=>t().title),l(h,()=>ae(t().publishedAt)),l(s,a(f,{get when(){return t().viewCount},get children(){var S=u(qe),p=S.firstChild,[g,w]=d(p.nextSibling);return g.nextSibling,l(S,()=>ne(t().viewCount),g,w),S}}),c,o),l(r,a(f,{get when(){return e.showProgress},get children(){return a(re,{get videoId(){return t().id},showProgress:!0,showFavorite:!0,showWatchLater:!0})}}),_,v),r})()]}})}function et(e){const t=()=>e.video;return a(te,{to:"/study/$id",get params(){return{id:t().id}},class:"flex gap-4 bg-emerald-900/50 rounded-xl p-4 border border-emerald-700/50 hover:border-amber-500/50 cursor-pointer transition-all duration-300 hover:bg-emerald-900/70",get children(){return[(()=>{var r=u(Je),n=r.firstChild,s=n.nextSibling,[h,b]=d(s.nextSibling);return l(r,a(f,{get when(){return t().duration},get children(){var c=u(ie);return l(c,()=>le(t().duration)),c}}),h,b),E(c=>{var o=t().thumbnail,m=t().title;return o!==c.e&&W(n,"src",c.e=o),m!==c.t&&W(n,"alt",c.t=m),c},{e:void 0,t:void 0}),r})(),(()=>{var r=u(Xe),n=r.firstChild,s=n.nextSibling,[h,b]=d(s.nextSibling),c=h.nextSibling,o=c.firstChild,m=o.firstChild,_=m.nextSibling,[v,S]=d(_.nextSibling),p=o.nextSibling,[g,w]=d(p.nextSibling),C=c.nextSibling,[V,M]=d(C.nextSibling);return l(n,()=>t().title),l(r,a(f,{get when(){return t().playlistName},get children(){var y=u(Oe);return l(y,()=>t().playlistName),y}}),h,b),l(o,()=>ae(t().publishedAt),v,S),l(c,a(f,{get when(){return t().viewCount},get children(){var y=u(Ue),B=y.firstChild,A=B.nextSibling,[N,D]=d(A.nextSibling);return l(y,()=>ne(t().viewCount),N,D),y}}),g,w),l(r,a(f,{get when(){return e.showProgress},get children(){return a(re,{get videoId(){return t().id},showProgress:!0,showFavorite:!0,showWatchLater:!0})}}),V,M),r})()]}})}var Y=$("<div>"),tt=$("<div class=mt-8>"),rt=$('<div class="text-center py-12"><p class="text-emerald-400 text-lg">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯Ø±ÙˆØ³ Ù…ØªØ§Ø­Ø©');function lt(e){return(()=>{var t=u(Y);return l(t,a(f,{get when(){return e.videos.length>0},get fallback(){return u(rt)},get children(){return[(()=>{var r=u(Y);return l(r,a(Se,{get each(){return e.videos},children:n=>a(Ye,{video:n,get viewMode(){return e.viewMode},get showProgress(){return e.mounted}})})),E(()=>ee(r,e.viewMode==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6":"flex flex-col gap-4")),r})(),a(f,{get when(){return e.totalPages>1},get children(){var r=u(tt);return l(r,a(we,{get currentPage(){return e.currentPage},get totalPages(){return e.totalPages},get onPageChange(){return e.onPageChange}})),r}})]}})),t})()}var nt=$(`<style>
      .custom-scrollbar {
        scrollbar-width: thin;
        scrollbar-color: #d97706 rgba(4, 120, 87, 0.2);
        scroll-behavior: smooth;
      }
      .custom-scrollbar::-webkit-scrollbar {
        width: 8px;
      }
      .custom-scrollbar::-webkit-scrollbar-track {
        background: rgba(4, 120, 87, 0.2);
        border-radius: 4px;
        margin: 4px;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb {
        background: linear-gradient(180deg, #d97706 0%, #b45309 100%);
        border-radius: 4px;
        border: 2px solid transparent;
        background-clip: padding-box;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(180deg, #f59e0b 0%, #d97706 100%);
        background-clip: padding-box;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb:active {
        background: #f59e0b;
      }
    `);function at(){return u(nt)}var it=$('<div class="min-h-screen bg-emerald-950 text-emerald-50"><!$><!/><main class="container mx-auto px-4 py-8"><div class="flex flex-col lg:flex-row gap-8"><!$><!/><div class="flex-1 order-1 lg:order-2"><!$><!/><!$><!/></div></div></main><!$><!/>');function dt(){const e=K.useLoaderData(),t=K.useSearch(),r=ye({from:K.fullPath}),[n,s]=P(""),[h,b]=P(null),[c,o]=P(!1),[m,_]=P(1);let v=null;const S=async(i,x=1)=>{if(!i.trim()){b(null);return}o(!0);try{const F=await ke(i,{page:x,pageSize:24,category:p(),playlistId:g()||void 0});b(F)}finally{o(!1)}};Ce(()=>{const i=n();if(v&&clearTimeout(v),_(1),!i.trim()){b(null);return}v=setTimeout(()=>S(i,1),300)}),pe(()=>{v&&clearTimeout(v)});const p=()=>t().category??"all",g=()=>t().playlist??null,w=()=>t().view??"grid",C=()=>t().sort??"date",V=()=>t().page??1,M=i=>r({search:x=>({...x,category:i==="all"?void 0:i,playlist:void 0,page:void 0}),replace:!0}),y=i=>r({search:x=>({...x,playlist:i||void 0,page:void 0}),replace:!0}),B=i=>r({search:x=>({...x,view:i==="grid"?void 0:i}),replace:!0}),A=i=>r({search:x=>({...x,sort:i==="date"?void 0:i,page:void 0}),replace:!0}),N=i=>r({search:x=>({...x,page:i<=1?void 0:i}),replace:!0}),[D,z]=P(!1);Z(()=>z(!0));const{index:I,videos:G}=e(),Q=()=>n().trim().length>0,L=()=>Q()&&h()?h():G,R=()=>Q()?m():V(),k=i=>{Q()?(_(i),S(n(),i)):N(i)};return(()=>{var i=u(it),x=i.firstChild,[F,H]=d(x.nextSibling),J=F.nextSibling,O=J.firstChild,se=O.firstChild,[U,oe]=d(se.nextSibling),q=U.nextSibling,de=q.firstChild,[X,ce]=d(de.nextSibling),ge=X.nextSibling,[ue,$e]=d(ge.nextSibling),be=J.nextSibling,[he,xe]=d(be.nextSibling);return l(i,a(Be,{title:"Ø§Ù„Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù…Ø±Ø¦ÙŠØ©",description:"Ù‚Ù†Ø§Ø© Ø¯. ÙŠØ³Ø±ÙŠ Ø¬Ø¨Ø± Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙˆØªÙŠÙˆØ¨",get stats(){return{totalVideos:I.stats.totalVideos,totalPlaylists:I.stats.totalPlaylists,categoriesCount:I.stats.categoriesCount}},get searchQuery(){return n()},onSearchChange:s}),F,H),l(O,a(De,{get categories(){return I.categories},get playlists(){return I.playlists},get selectedCategory(){return p()},get selectedPlaylist(){return g()},onCategoryClick:T=>{M(T),y(null)},onPlaylistClick:T=>y(T===g()?null:T),onClearPlaylistSelection:()=>y(null)}),U,oe),l(q,a(Pe,{get totalVideos(){return L().total},get currentPage(){return R()},get totalPages(){return L().totalPages},get searchQuery(){return n()},videosPerPage:24,get sortBy(){return C()},get viewMode(){return w()},onVideosPerPageChange:()=>{},onSortChange:A,onViewModeChange:B,get isSearching(){return c()}}),X,ce),l(q,a(lt,{get videos(){return L().items},get viewMode(){return w()},get totalVideos(){return L().total},get currentPage(){return R()},get totalPages(){return L().totalPages},videosPerPage:24,get mounted(){return D()},onPageChange:k}),ue,$e),l(i,a(at,{}),he,xe),i})()}export{dt as component};
